
CREATE TABLE comments (
    member_id   VARCHAR2(30) NOT NULL,
    lecture_id  NUMBER(5) NOT NULL,
    content     CLOB NOT NULL,
    regdate     VARCHAR2(50) NOT NULL
);

ALTER TABLE comments ADD CONSTRAINT comment_pk PRIMARY KEY ( member_id,
                                                             lecture_id );

CREATE TABLE instructor (
    id         VARCHAR2(30) NOT NULL,
    name       VARCHAR2(30) NOT NULL,
    phone      VARCHAR2(50) NOT NULL,
    introduce  VARCHAR2(1000) NOT NULL,
    image      VARCHAR2(300) NOT NULL
);

ALTER TABLE instructor ADD CONSTRAINT instructor_pk PRIMARY KEY ( id );

CREATE TABLE lecture (
    id         NUMBER(5) NOT NULL,
    name       VARCHAR2(100) NOT NULL,
    genre      VARCHAR2(50) NOT NULL,
    image      VARCHAR2(300) NOT NULL,
    duration   NUMBER(5) NOT NULL,
    caution    VARCHAR2(300) NOT NULL,
    introduce  VARCHAR2(300) NOT NULL
);

ALTER TABLE lecture ADD CONSTRAINT lecture_pk PRIMARY KEY ( id );

CREATE TABLE lecture_video (
    lecture_id  NUMBER(5) NOT NULL,
    video_id    NUMBER(5) NOT NULL
);

ALTER TABLE lecture_video ADD CONSTRAINT lecture_video_pk PRIMARY KEY ( lecture_id,
                                                                        video_id );

CREATE TABLE member (
    id        VARCHAR2(30) NOT NULL,
    password  VARCHAR2(1000) NOT NULL,
    name      VARCHAR2(50) NOT NULL,
    email     VARCHAR2(50) NOT NULL,
    phone     VARCHAR2(50) NOT NULL
);

ALTER TABLE member ADD CONSTRAINT member_pk PRIMARY KEY ( id );

CREATE TABLE member_lecture (
    lecture_id    NUMBER(5) NOT NULL,
    member_id     VARCHAR2(30) NOT NULL,
    registerdate  VARCHAR2(50) NOT NULL
);

ALTER TABLE member_lecture ADD CONSTRAINT member_lecture_pk PRIMARY KEY ( member_id,
                                                                          lecture_id );

CREATE TABLE register (
    instructor_id  VARCHAR2(30) NOT NULL,
    lecture_id     NUMBER(5) NOT NULL
);

ALTER TABLE register ADD CONSTRAINT register_pk PRIMARY KEY ( instructor_id,
                                                              lecture_id );

CREATE TABLE video (
    id           NUMBER(5) NOT NULL,
    lesson       NUMBER(5) NOT NULL,
    title        VARCHAR2(100) NOT NULL,
    information  VARCHAR2(300) NOT NULL,
    url          VARCHAR2(300) NOT NULL
);

ALTER TABLE video ADD CONSTRAINT video_pk PRIMARY KEY ( id );

ALTER TABLE comments
    ADD CONSTRAINT comment_lecture_fk FOREIGN KEY ( lecture_id )
        REFERENCES lecture ( id );

ALTER TABLE comments
    ADD CONSTRAINT comment_member_fk FOREIGN KEY ( member_id )
        REFERENCES member ( id );

ALTER TABLE lecture_video
    ADD CONSTRAINT lecture_video_lecture_fk FOREIGN KEY ( lecture_id )
        REFERENCES lecture ( id );

ALTER TABLE lecture_video
    ADD CONSTRAINT lecture_video_video_fk FOREIGN KEY ( video_id )
        REFERENCES video ( id );

ALTER TABLE member_lecture
    ADD CONSTRAINT member_lecture_lecture_fk FOREIGN KEY ( lecture_id )
        REFERENCES lecture ( id );

ALTER TABLE member_lecture
    ADD CONSTRAINT member_lecture_member_fk FOREIGN KEY ( member_id )
        REFERENCES member ( id );

ALTER TABLE register
    ADD CONSTRAINT register_instructor_fk FOREIGN KEY ( instructor_id )
        REFERENCES instructor ( id );

ALTER TABLE register
    ADD CONSTRAINT register_lecture_fk FOREIGN KEY ( lecture_id )
        REFERENCES lecture ( id );